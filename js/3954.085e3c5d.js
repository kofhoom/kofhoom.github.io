"use strict";(self["webpackChunkgdv_frontend"]=self["webpackChunkgdv_frontend"]||[]).push([[3954,799,32],{60799:function(t,a,s){s.r(a),s.d(a,{default:function(){return c}});var e=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"sChartHolderId"+t.i}})},i=[],r=s(37847),l={props:{chartData:{type:Array,required:!0,default:()=>[]},i:{type:Number,required:!0,default:()=>0}},data(){return{}},mounted(){const t={top:10,right:30,bottom:50,left:40},a=500-t.left-t.right,s=350-t.top-t.bottom,e=r.Ys("#sChartHolderId"+this.i).append("svg").attr("width",a+t.left+t.right).attr("height",s+t.top+t.bottom).attr("viewBox","0 0 "+(a+t.left+t.right)+" "+(s+t.top+t.bottom)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+t.left+","+t.top+")"),i=r.tiA().range([0,a]).domain(this.chartData.map((t=>t.label))).padding(.2);e.append("g").attr("transform","translate(0,"+s+")").call(r.LLu(i)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");const l=r.BYU().domain([0,r.Fp7(this.chartData,(t=>t.y))]).range([s,0]);e.append("g").call(r.y4O(l));const n=r.PKp().domain(this.chartData).range(r.W1Y);e.selectAll("mybar").data(this.chartData).enter().append("rect").attr("x",(t=>i(t.label))).attr("width",i.bandwidth()).attr("fill",((t,a)=>n(a))).attr("height",(t=>s-l(0))).attr("y",(t=>l(0))),e.selectAll("rect").transition().duration(800).attr("y",(t=>l(t.y))).attr("height",(t=>s-l(t.y))).delay(((t,a)=>100*a));const o=this.chartData.slice(0,5),d=this.chartData.slice(5,10),c=r.Ys("#sChartHolderId"+this.i).append("svg").attr("width",(a+t.left+t.right)/2).attr("height",s+t.top+t.bottom).attr("margin",20).attr("viewBox","0 0 "+(a+t.left+t.right)/2+" "+(s+t.top+t.bottom)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate(0,20)");let h=c.selectAll(".legend").data(o).enter().append("g").attr("transform",((t,a)=>"translate(0,"+60*a+")")).attr("class","legend");if(h.append("rect").attr("width",50).attr("height",50).attr("fill",((t,a)=>n(a))),h.append("text").text((t=>t.label+"      "+(isNaN(t.y)?0:t.y)+"%")).style("font-size",15).attr("y",30).attr("x",60),this.chartData.length>5){const e=r.Ys("#sChartHolderId"+this.i).attr("width",(a+t.left+t.right)/2).attr("height",s+t.top+t.bottom).attr("margin",20).attr("viewBox","0 0 "+(a+t.left+t.right)/2+" "+(s+t.top+t.bottom)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate(0,20)");h=e.selectAll(".legend").data(d).enter().append("g").attr("transform",((t,a)=>"translate(0,"+60*a+")")).attr("class","legend"),h.append("rect").attr("width",50).attr("height",50).attr("fill",((t,a)=>n(a+5))),h.append("text").text((t=>t.label+"      "+(isNaN(t.y)?0:t.y)+"개")).style("font-size",15).attr("y",30).attr("x",60)}const u=e.selectAll("mybar");u.exit().remove()}},n=l,o=s(1001),d=(0,o.Z)(n,e,i,!1,null,null,null),c=d.exports},70032:function(t,a,s){s.r(a),s.d(a,{default:function(){return c}});var e=function(){var t=this,a=t._self._c;return a("div",{attrs:{id:"sChartHolderId"+t.i}})},i=[],r=(s(57658),s(37847)),l={props:{chartData:{type:Array,required:!0,default:()=>[]},i:{type:Number,required:!0,default:()=>0}},data(){return{}},methods:{d3Entries(t){const a=[];return t.forEach((t=>{for(const s in t)a.push({key:s,value:t[s]})})),a}},mounted(){const t=500,a=300,s=20,e=Math.min(t,a)/2-s,i=r.Ys("#sChartHolderId"+this.i).append("svg").attr("width",t).attr("height",a).attr("viewBox","0 0 "+t+" "+a).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+t/2+","+a/2+")"),l=r.PKp().domain(this.chartData).range(r.W1Y),n=r.ve8().value((t=>t.y)),o=n(this.chartData),d=r.Nb1().innerRadius(0).outerRadius(e);i.selectAll("mySlices").data(o).enter().append("path").attr("d",d).attr("fill",(t=>l(t.data.label))).transition().duration(800).attrTween("d",(t=>{const a=r.sXR(t.startAngle,t.endAngle);return s=>(t.endAngle=a(s),d(t))})),i.selectAll("mySlices").data(o).enter().append("text").text((t=>t.data.y<5?"":t.data.y+"%")).attr("transform",(t=>{const a=d.centroid(t);return"translate("+1.4*a[0]+","+1.4*a[1]+")"})).style("fill","white").style("font-weight","bold").style("text-anchor","middle").style("font-size",15).style("opacity",0).transition().duration(2e3).style("opacity",1);const c=o.slice(0,5),h=o.slice(5,10),u=r.Ys("#sChartHolderId"+this.i).append("svg").attr("width",t/2).attr("height",a).attr("margin",20).attr("viewBox","0 0 "+t/2+" "+a).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate(0,0)");let p=u.selectAll(".legend").data(c).enter().append("g").attr("transform",((t,a)=>"translate(0,"+60*a+")")).attr("class","legend");if(p.append("rect").attr("width",50).attr("height",50).attr("fill",(t=>l(t.data.label))),p.append("text").text((t=>"   "+t.data.label+"  "+(isNaN(t.data.y)?0:t.data.y)+"%")).style("font-size",15).attr("y",30).attr("x",60),o.length>5){const s=r.Ys("#sChartHolderId"+this.i).append("svg").attr("width",t/2).attr("height",a).attr("margin",20).attr("viewBox","0 0 "+t/2+" "+a).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate(0,0)");p=s.selectAll(".legend").data(h).enter().append("g").attr("transform",((t,a)=>"translate(0,"+60*a+")")).attr("class","legend"),p.append("rect").attr("width",50).attr("height",50).attr("fill",(t=>l(t.data.label))),p.append("text").text((t=>"   "+t.data.label+"  "+(isNaN(t.data.y)?0:t.data.y)+"%")).style("font-size",15).attr("y",30).attr("x",60)}}},n=l,o=s(1001),d=(0,o.Z)(n,e,i,!1,null,null,null),c=d.exports},33954:function(t,a,s){s.r(a),s.d(a,{default:function(){return m}});var e=s(64562),i=function(){var t=this,a=t._self._c;return t.resultNo<1?a("div",{staticClass:"survy-agree-box type2 survy-view first",attrs:{id:"resultTab"}},[a("div",{staticClass:"survy-member-content",staticStyle:{width:"100%"}},[a("div",{staticClass:"tap-info-content masters active",staticStyle:{width:"100%","margin-top":"0"}},[a("div",{staticClass:"survy-member-content",staticStyle:{width:"100%"}},[a("div",{staticClass:"tap-info-content info-first-box",staticStyle:{width:"100%","margin-top":"0"}},[a("div",{staticClass:"main-sub-info-box"},[a("ul",{staticClass:"main-sub-info-ul d-flex"},[a("li",{staticClass:"main-sub-info-li"},[a("p",{staticClass:"sub-info-title"},[t._v("문항수")]),a("p",{staticClass:"sub-info-data"},[t._v('"'+t._s(t.result.qesitmCnt)+'"')])]),a("li",{staticClass:"main-sub-info-li"},[a("p",{staticClass:"sub-info-title"},[t._v("응답자 수")]),a("p",{staticClass:"sub-info-data"},[t._v('"'+t._s(t.result.trprCnt)+'"')])]),a("li",{staticClass:"main-sub-info-li"},[a("p",{staticClass:"sub-info-title"},[t._v("응답률")]),a("p",{staticClass:"sub-info-data blue-color"},[t._v('"'+t._s(t.result.trprRat)+'"')])])])]),t._m(0),t._m(1),a("div",{staticClass:"main-info-box"},[a("ul",{staticClass:"main-info-ul"},[a("li",{staticClass:"main-info-li"},[t._v("설문기간 : "),a("span",{staticClass:"sub-text"},[t._v(t._s(t.result.quTerm))])]),a("li",{staticClass:"main-info-li"},[t._v("설문번호 : "),a("span",{staticClass:"sub-text"},[t._v(t._s(t.srvyRegNo))])]),a("li",{staticClass:"main-info-li"},[t._v("조사대상 : "),a("span",{staticClass:"sub-text"},[t._v(t._s(t.result.trget))])])])]),"02"===t.userResultCheck?a("div",{staticClass:"tap-info-content mla",staticStyle:{"margin-top":"0"}},[a(e.Z,{staticClass:"mr10",staticStyle:{color:"#fff"},attrs:{elevation:"0",loading:t.isLoading,color:"#004EBC",height:"36px"},on:{click:function(a){t.resultNo=1}}},[t._v("보고서 인쇄")]),a(e.Z,{staticClass:"mr10",staticStyle:{color:"#fff"},attrs:{elevation:"0",loading:t.isLoading,color:"#004EBC",height:"36px"},on:{click:t.printElement}},[t._v("화면 인쇄")]),a(e.Z,{staticClass:"mr10",staticStyle:{color:"#fff"},attrs:{elevation:"0",loading:t.isLoading,color:"#004EBC",height:"36px"},on:{click:t.excelNomemberDownload}},[t._v("결과 다운로드")]),a(e.Z,{staticClass:"mr10",staticStyle:{color:"#fff"},attrs:{elevation:"0",loading:t.isLoading,color:"#004EBC",height:"36px"},on:{click:t.getGetMakeResult}},[t._v("결과 생성")])],1):t._e()]),t._l(t.list.filter((({exmplSn:t})=>0===t)),(function(s,e){return a("div",{key:e,staticClass:"circular-graph-box w100p"},[a("div",{staticClass:"tap-wrap q-box-header-box text-left",staticStyle:{width:"100%"}},[a("p",{staticClass:"q-title"},[t._v(t._s(s.otptSeq)+". "+t._s(s.qstnCn))]),"sur003001"===s.srvyClssCd||"sur003005"===s.srvyClssCd||"sur003007"===s.srvyClssCd?a("ul",{staticClass:"q-infos-data-ul d-flex"},[a("li",{staticClass:"q-infos-data-li"},[t._v("개수: "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.cntVal))])]),a("li",{staticClass:"q-infos-data-li"},[t._v("최소값: "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.minVal))])]),a("li",{staticClass:"q-infos-data-li"},[t._v("최대값: "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.maxVal))])]),a("li",{staticClass:"q-infos-data-li"},[t._v("평균값: "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.avgVal))])]),a("li",{staticClass:"q-infos-data-li"},[t._v("표준편차: "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.stdVal))])])]):t._e(),"sur003004"===s.srvyClssCd?a("ul",{staticClass:"q-infos-data-ul d-flex"},t._l(t.chartData[e+1],(function(s,e){return a("li",{key:e,staticClass:"q-infos-data-li"},[t._v("평균 순위 - "+t._s(s.label)+" : "),a("span",{staticClass:"q-infos-data-li-value"},[t._v(t._s(s.y/100))])])})),0):t._e()]),"sur003002"===s.srvyClssCd?a("div",{staticClass:"circular-graph-area mt20"},[a("bar-chart",{attrs:{chartData:t.chartData[e+1]||[],i:e}})],1):t._e(),"sur003001"===s.srvyClssCd||"sur003007"===s.srvyClssCd?a("div",{staticClass:"circular-graph-area mt20"},[a("pie-chart",{attrs:{chartData:t.chartData[e+1]||[],i:e}})],1):t._e()])}))],2)])])]):a("report")},r=[function(){var t=this,a=t._self._c;return a("div",{staticClass:"info-lines"},[a("div",{staticClass:"line-black"})])},function(){var t=this,a=t._self._c;return a("h3",{staticClass:"total-info-subtitle mb11"},[a("span",{staticClass:"info-middot"},[t._v("·")]),t._v(" 설문 정보 ")])}],l=(s(57658),s(20629)),n=s(60799),o=s(70032),d=s(10918),c=s(74295),h=s.n(c),u=s(25108),p={props:{isReload:{type:Boolean,required:!0,default:!1}},components:{BarChart:n["default"],PieChart:o["default"],Report:d["default"]},data(){return{result:{},list:[],chartData:[],resultNo:-1,trgetResult:[],trgetNoResult:[],qesitmList:[],resultHeader:[{header:"아이디",key:"trprId",width:10},{header:"이름",key:"trprNm",width:10}],qesitmHeader:{header:"",key:"",width:10}}},created(){this.init()},watch:{isReload(t){t&&this.init()}},computed:{...(0,l.rn)("gdv-app",["srvyRegNo","userResultCheck"]),...(0,l.Se)("global",["isLoading"])},methods:{...(0,l.nv)("global",["showLoading","hideLoading","showSuccess","showError"]),init(){this.getGetSurvResult(),"02"===this.userResultCheck&&this.getGetResultDown()},getGetSurvResult(){this.showLoading(),this.$apis.survey.getGetSurvResult(this.srvyRegNo,this.userResultCheck).then((t=>{u.log(t),this.result=t.data.response.resultBasicList[0],this.list=t.data.response.ResultGraphList;let a=[];this.list.forEach((({exmplSn:t,biyul1:s,cnt2:e,qstnCn:i,srvyClssCd:r})=>{"sur003002"!==r||"sur003004"!==r?0!==t?a.push({y:s,label:i||""}):(this.chartData.push(a),a=[]):0!==t?a.push({y:e,label:i||""}):(this.chartData.push(a),a=[])})),this.chartData.push(a)})).catch((t=>{u.log(t)})).finally((()=>{this.hideLoading()}))},getGetMakeResult(){this.showLoading(),this.$apis.survey.getGetMakeResult(this.srvyRegNo).then((t=>{u.log(t),this.getGetSurvResult(),this.resultHeader=[{header:"아이디",key:"trprId",width:10},{header:"이름",key:"trprNm",width:10}],this.getGetResultDown(),this.getGetSurvResult()})).catch((t=>{u.log(t)})).finally((()=>{this.hideLoading()}))},getGetSurvReport(){this.showLoading(),this.$apis.survey.getGetSurvReport(this.srvyRegNo).then((t=>{u.log(t),this.getGetSurvResult()})).catch((t=>{u.log(t)})).finally((()=>{this.hideLoading()}))},printElement(){window.print()},getGetResultDown(){this.showLoading(),this.$apis.survey.getGetResultDown(this.srvyRegNo).then((t=>{u.log(t),this.trgetResult=t.data.response.trgetResult,this.trgetNoResult=t.data.response.trgetNoResult,this.qesitmList=t.data.response.qesitmList})).catch((t=>{u.log(t)})).finally((()=>{this.hideLoading()}))},excelNomemberDownload(){const t=new(h().Workbook),a=t.addWorksheet("개인별 결과"),s=t.addWorksheet("설문하지 않는 사람 명단");this.qesitmList.forEach((({qstnCn:t,srvyQstnSn:a})=>{this.resultHeader.push({header:t,key:"qstn"+a+"Rslt"||0})})),a.columns=this.resultHeader,s.columns=[{header:"아이디",key:"trprId",width:10},{header:"이름",key:"trprNm",width:10},{header:"전화번호",key:"mblTelno",width:10}],this.trgetResult.forEach((t=>{a.addRow(t)})),this.trgetNoResult.forEach((t=>{s.addRow(t)})),t.xlsx.writeBuffer().then((t=>{const a=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"}),s=window.URL.createObjectURL(a),e=document.createElement("a");e.href=s,e.download="설문결과.xlsx",e.click(),window.URL.revokeObjectURL(s)}))}}},f=p,g=s(1001),v=(0,g.Z)(f,i,r,!1,null,null,null),m=v.exports}}]);