"use strict";(self["webpackChunkgdv_frontend"]=self["webpackChunkgdv_frontend"]||[]).push([[4755,2967,1119],{70753:function(t,e,s){s.r(e),s.d(e,{default:function(){return L}});var i=s(64562),a=s(4324),r=s(25372),n=s(85166),l=s(89780),h=function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-info-content-wrap"},[t._m(0),e("div",{staticClass:"total-info-section"},[e("div",{staticClass:"total-info-content-wrap"},[e("div",{attrs:{id:"div-total-info-header"}}),e("div",{staticClass:"total-info-section"},[t._m(1),e("main",{staticClass:"permission-wrap mt35"},[e("section",{staticClass:"labels-wrap p13 mr10",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("권한그룹 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.authTot)+"건")])])]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[e("tree-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"dutyTree",attrs:{headers:t.authHeader,allReadOnly:!0,items:t.authItems,height:"473px",fixedHeader:!0},on:{"dblclick:row":t.authDblClick}})],1)]),e("section",{staticClass:"labels-wrap p13",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("권한 사용자 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.userTot)+"건")])])]),e("div",{staticClass:"v-select-wrap half mt5"},[e(n.Z,{staticClass:"center-search-select mr5 mt5",attrs:{items:t.srchItems,label:"조회조건","item-text":"name","item-value":"value",loading:t.isLoading,outlined:"",dense:"","hide-details":""},model:{value:t.inqSlctn,callback:function(e){t.inqSlctn=e},expression:"inqSlctn"}}),e(n.Z,{staticClass:"center-search-select mr5 mt5",attrs:{label:"회원구분",items:t.stusCdItems,"item-text":"name","item-value":"value",loading:t.isLoading,outlined:"",dense:"","hide-details":""},model:{value:t.stusCd,callback:function(e){t.stusCd=e},expression:"stusCd"}})],1),e("div",{staticClass:"center-search-wrap three mt10"},[e(l.Z,{staticClass:"center-search-input mr5",attrs:{label:"",placeholder:"검색어",outlined:"",dense:"","hide-details":"",loading:t.isLoading},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList.apply(null,arguments)}},model:{value:t.inqVal,callback:function(e){t.inqVal=e},expression:"inqVal"}}),e(i.Z,{staticClass:"vue-bt-small",attrs:{elevation:"0",loading:t.isLoading},on:{click:t.searchList}},[t._v("검색")])],1),e("section",{staticClass:"table-scroll data mt10",staticStyle:{"max-height":"490px"}},[e("simple-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"common-research-table notice",staticStyle:{"margin-top":"0"},attrs:{headers:t.userHeader,items:t.userItems,rowHeaders:t.rowHeaders,allReadOnly:!0,height:"266px",fixedHeader:!0},on:{"check:row":t.userCheck}})],1),e("div",{staticClass:"pagination-box text-center mt5"},[e(r.Z,{directives:[{name:"show",rawName:"v-show",value:t.userTot>10,expression:"userTot > 10"}],attrs:{length:t.pageCnt,"total-visible":10,loading:t.isLoading},on:{input:t.getUserList},model:{value:t.pageNo,callback:function(e){t.pageNo=e},expression:"pageNo"}})],1),e(i.Z,{staticClass:"vue-bt w100p mt10",staticStyle:{"max-width":"unset"},attrs:{elevation:"0",loading:t.isLoading,disabled:!t.authrtGrupId},on:{click:t.putDutyAuthrtGroupUserStore}},[t._v("권한그룹별 포틀릿 목록에 추가하기")])],1)]),t.authrtGrupId?e("section",{staticClass:"labels-wrap p13 mt18",staticStyle:{"max-width":"100%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("["+t._s(t.authrtGrupNm)+"]권한 그룹별 사용자 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.authUserTot)+"건")]),e(i.Z,{attrs:{disabled:!t.authrtGrupId,loading:t.isLoading,text:"",outlined:"",icon:"",color:"primary"},on:{click:function(e){return t.postDutyAuthrtGroupUserSave("U")}}},[e(a.Z,[t._v("mdi-content-save")])],1),e(i.Z,{attrs:{disabled:!t.authrtGrupId,loading:t.isLoading,text:"",outlined:"",icon:"",color:"gray"},on:{click:function(e){return t.postDutyAuthrtGroupUserSave("D")}}},[e(a.Z,[t._v("mdi-delete")])],1)],1)]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[e("simple-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],staticClass:"common-research-table notice",attrs:{headers:t.authUserHeader,items:t.authUserItems,rowHeaders:t.rowHeaders,height:"370px",fixedHeader:!0},on:{"check:row":t.authUserCheck,"change:row":t.authUserChange}})],1)]):t._e()])])])])},o=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-header-wrap"},[e("p",{staticClass:"total-header-title"},[t._v("업무별권한그룹관리")])])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c"},[e("span",{staticClass:"table-ment",staticStyle:{"line-height":"1.5"}},[t._v(" * 권한그룹을 더블클릭해 선택 후 체크한 사용자 목록을 추가해주세요. ")])])}],u=(s(57658),s(31166)),c=s(50091),d=s(20629),p=s(25108),m={components:{SimpleDataTable:u["default"],TreeDataTable:c["default"]},computed:{...(0,d.Se)("global",["isLoading"])},data(){return{rowHeaders:["checkbox"],authHeader:[{title:"권한그룹명",column:"authrtGrupNm",align:"left",width:"370px"}],userHeader:[{title:"신분",column:"stusNm",align:"left",width:"200px"},{title:"아이디",column:"userNm",align:"left",width:"200px"},{title:"이름",column:"userId",align:"left",width:"200px"}],authUserHeader:[{title:"신분",readonly:!0,column:"stusNm",align:"left",width:"200px"},{title:"아이디",readonly:!0,column:"userNm",align:"left",width:"200px"},{title:"이름",readonly:!0,column:"userId",align:"left",width:"200px"},{title:"사용여부",column:"useYn",align:"left",width:"200px",renderer:{type:"CheckBox"}}],authItems:[],userItems:[],authUserItems:[],srchItems:[{name:"전체",value:"11"},{name:"성명",value:"01"},{name:"사용자ID",value:"02"}],createUserList:[],updateUserList:[],deleteUserList:[],stusCdItems:[],inqVal:"",inqSlctn:"11",stusCd:"00",pageNo:1,pageCnt:0,authTot:0,userTot:0,authUserTot:0,authrtGrupId:"",authrtGrupNm:"",totalCnt:1}},methods:{...(0,d.nv)("global",["showLoading","hideLoading","showSuccess","showError","showWarning"]),selectSmryAuthrtGrupList(){this.authItems.splice(0,this.items?.length),this.item={},this.showLoading(),this.$apis.common.selectSmryAuthrtGrupList("2000000000").then((t=>{const e=t?.data.response.list;e.splice(0,0,{authrtGrupClssCd:"com002000",upAuthrtGrupId:"",authrtGrupId:"0000000001",authrtGrupNm:"시스템관리자",authrtGrupLvl:0,sortSeq:1}),this.authTot=e.length||0,e?.length&&(e.forEach(((t,s)=>{const i=e.filter((({upAuthrtGrupId:e})=>e===t.authrtGrupId))||[];i&&(e[s].children=i)})),this.authItems.push(e[0]))})).catch((t=>{p.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))},getUserList(){this.authItems.splice(0,this.items?.length),this.showLoading(),this.$apis.common.getUserList(this.pageNo,this.inqSlctn,this.inqVal,this.stusCd).then((t=>{this.userItems=t.data.response.list,this.userTot=t.data.response.tot,this.pageCnt=Math.ceil(this.userTot/10)})).catch((t=>{p.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))},getDutyAuthrtGrupUserList(){this.updateUserList=[],this.deleteUserList=[],this.showLoading(),this.$apis.common.getDutyAuthrtGrupUserList(this.authrtGrupId).then((t=>{this.authUserItems=t.data.response.list,this.authUserTot=t.data.response.list.length})).catch((t=>{p.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))},putDutyAuthrtGroupUserStore(){if(0===this.createUserList.length)return this.showError({message:"추가할 데이터가 없습니다"}),!1;this.showLoading(),this.$apis.common.putDutyAuthrtGroupUserStore(this.authrtGrupId,this.createUserList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getDutyAuthrtGrupUserList())})).catch((t=>{p.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading(),this.$refs.dutyTree.syncTableLayout()}))},postDutyAuthrtGroupUserSave(t){let e="",s=!0,i=[],a=[];return"D"===t?0===this.deleteUserList?.length?(e="삭제할 데이터가 없습니다.",s=!1):(e="선택 값을 삭제하시겠습니까?",i=this.deleteUserList):"U"===t&&(0===this.updateUserList?.length?(e="수정할 데이터가 없습니다.",s=!1):(e="변경 사항을 수정하시겠습니까?",a=this.updateUserList)),s?!!confirm(e)&&(this.showLoading(),void this.$apis.common.postDutyAuthrtGroupUserSave(this.authrtGrupId,a,i).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getDutyAuthrtGrupUserList())})).catch((t=>{p.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))):(this.showError({message:e}),!1)},searchList(){""===this.inqVal?(this.pageNo=1,this.getUserList()):""===this.inqVal.replace(/\s/g,"")?this.showError({message:"검색어를 입력하세요."}):(this.pageNo=1,this.getUserList())},authDblClick(t,e){return 1===t.authrtGrupLvl?(this.showWarning("메뉴를 추가할 수 없는 권한입니다."),!1):!(0!==this.updateUserList?.length&&!confirm("변경내용이 있습니다.\n다른 권한 조회 시 입력한 내용이 사라집니다.\n조회하시겠습니까?"))&&(this.authrtGrupId=t.authrtGrupId,this.authrtGrupNm=t.authrtGrupNm,void this.getDutyAuthrtGrupUserList())},userCheck(t,e){if(e)this.createUserList.push(t.userId);else for(let s=0;s<this.createUserList.length;s++)this.createUserList[s]===t.userId&&(this.createUserList.splice(s,1),s--)},authUserChange(t,e,s){let i="I";for(const a in this.updateUserList)if(this.updateUserList[a].userId===t.userId){this.updateUserList[a]=t,i="U";break}"I"===i&&(t.FLAG="U",this.updateUserList.push(t))},authUserCheck(t,e){if(e)this.deleteUserList.push(t.userId);else for(let s=0;s<this.deleteUserList.length;s++)this.deleteUserList[s]===t.userId&&(this.deleteUserList.splice(s,1),s--)}},created(){this.$apis.common.getSoCodeList("com003").then((t=>{this.stusCdItems=t.data.response.list,this.stusCdItems.splice(this.stusCdItems.findIndex((t=>"com003001"===t.value)),1),this.stusCdItems.splice(0,0,{value:"00",name:"전체"})})),this.selectSmryAuthrtGrupList(),this.getUserList()}},g=m,v=s(1001),f=(0,v.Z)(g,h,o,!1,null,null,null),L=f.exports},25372:function(t,e,s){s.d(e,{Z:function(){return o}});s(57658);var i=s(42240),a=s(46746),r=s(16878),n=s(17756),l=s(96669),h=s(67678),o=(0,h.Z)(r.Z,(0,n.Z)({onVisible:["init"]}),l.Z).extend({name:"v-pagination",directives:{Resize:a.Z},props:{circle:Boolean,disabled:Boolean,length:{type:Number,default:0,validator:t=>t%1===0},nextIcon:{type:String,default:"$next"},prevIcon:{type:String,default:"$prev"},totalVisible:[Number,String],value:{type:Number,default:0},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},wrapperAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.wrapper"}},data(){return{maxButtons:0,selected:null}},computed:{classes(){return{"v-pagination":!0,"v-pagination--circle":this.circle,"v-pagination--disabled":this.disabled,...this.themeClasses}},items(){const t=parseInt(this.totalVisible,10);if(0===t||isNaN(this.length)||this.length>Number.MAX_SAFE_INTEGER)return[];const e=Math.min(Math.max(0,t)||this.length,Math.max(0,this.maxButtons)||this.length,this.length);if(this.length<=e)return this.range(1,this.length);const s=e%2===0?1:0,i=Math.floor(e/2),a=this.length-i+1+s;if(this.value>i&&this.value<a){const t=1,e=this.length,a=this.value-i+2,r=this.value+i-2-s,n=a-1===t+1?2:"...",l=r+1===e-1?r+1:"...";return[1,n,...this.range(a,r),l,this.length]}if(this.value===i){const t=this.value+i-1-s;return[...this.range(1,t),"...",this.length]}if(this.value===a){const t=this.value-i+1;return[1,"...",...this.range(t,this.length)]}return[...this.range(1,i),"...",...this.range(a,this.length)]}},watch:{value(){this.init()}},beforeMount(){this.init()},methods:{init(){this.selected=null,this.onResize(),this.$nextTick(this.onResize),setTimeout((()=>this.selected=this.value),100)},onResize(){const t=this.$el&&this.$el.parentElement?this.$el.parentElement.clientWidth:window.innerWidth;this.maxButtons=Math.floor((t-96)/42)},next(t){t.preventDefault(),this.$emit("input",this.value+1),this.$emit("next")},previous(t){t.preventDefault(),this.$emit("input",this.value-1),this.$emit("previous")},range(t,e){const s=[];t=t>0?t:1;for(let i=t;i<=e;i++)s.push(i);return s},genIcon(t,e,s,a,r){return t("li",[t("button",{staticClass:"v-pagination__navigation",class:{"v-pagination__navigation--disabled":s},attrs:{disabled:s,type:"button","aria-label":r},on:s?{}:{click:a}},[t(i.Z,[e])])])},genItem(t,e){const s=e===this.value&&(this.color||"primary"),i=e===this.value,a=i?this.currentPageAriaLabel:this.pageAriaLabel;return t("button",this.setBackgroundColor(s,{staticClass:"v-pagination__item",class:{"v-pagination__item--active":e===this.value},attrs:{type:"button","aria-current":i,"aria-label":this.$vuetify.lang.t(a,e)},on:{click:()=>this.$emit("input",e)}}),[e.toString()])},genItems(t){return this.items.map(((e,s)=>t("li",{key:s},[isNaN(Number(e))?t("span",{class:"v-pagination__more"},[e.toString()]):this.genItem(t,e)])))},genList(t,e){return t("ul",{directives:[{modifiers:{quiet:!0},name:"resize",value:this.onResize}],class:this.classes},e)}},render(t){const e=[this.genIcon(t,this.$vuetify.rtl?this.nextIcon:this.prevIcon,this.value<=1,this.previous,this.$vuetify.lang.t(this.previousAriaLabel)),this.genItems(t),this.genIcon(t,this.$vuetify.rtl?this.prevIcon:this.nextIcon,this.value>=this.length,this.next,this.$vuetify.lang.t(this.nextAriaLabel))];return t("nav",{attrs:{role:"navigation","aria-label":this.$vuetify.lang.t(this.wrapperAriaLabel)}},[this.genList(t,e)])}})}}]);