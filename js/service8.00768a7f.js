"use strict";(self["webpackChunkgdv_frontend"]=self["webpackChunkgdv_frontend"]||[]).push([[5802,2967,1119],{39115:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var i=s(64562),a=s(4324),n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-info-content-wrap"},[t._m(0),e("div",{staticClass:"total-info-section"},[e("div",{staticClass:"total-info-content-wrap"},[e("div",{attrs:{id:"div-total-info-header"}}),e("div",{staticClass:"total-info-section"},[e("main",{staticClass:"permission-wrap mt35"},[e("section",{staticClass:"labels-wrap p13 mr10",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("권한그룹 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.authTot)+"건")])])]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[e("tree-data-table",{ref:"authTree",attrs:{headers:t.authHeaders,items:t.authItems,fixedHeader:!0,height:"370px"},on:{"dblclick:row":t.authDblclick}})],1)]),e("section",{staticClass:"labels-wrap p13",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("메뉴 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.menuTot)+"건")])])]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[e("tree-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"menuTree",attrs:{rowHeaders:t.rowHeaders,headers:t.menuHeaders,items:t.menuItems,height:"320px",fixedHeader:!0},on:{"check:row":t.menuCheck}})],1),e(i.Z,{staticClass:"vue-bt w100p mt10",staticStyle:{"max-width":"unset"},attrs:{elevation:"0",color:"#004ebc",disabled:t.menuDisabledYn},on:{click:t.putAuthorityGroupMenuListStorage}},[t._v("권한그룹별 메뉴 목록에 추가하기")])],1)]),e("section",{staticClass:"labels-wrap p13 mt18",staticStyle:{"max-width":"100%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("["+t._s(t.authrtGrupNm||"-")+"] 그룹별 메뉴 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.authMenuTot)+"건")]),e(i.Z,{attrs:{loading:t.isLoading,disabled:t.menuDisabledYn,text:"",outlined:"",icon:"",color:"primary"},on:{click:t.postAuthorityGroupMenuListModification}},[e(a.Z,[t._v("mdi-content-save")])],1)],1)]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[e("tree-data-table",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading,expression:"!isLoading"}],ref:"authMenuTree",attrs:{rowHeaders:t.rowHeaders,headers:t.authMenuHeaders,items:t.authMenuItems,fixedHeader:!0,height:"350px"},on:{"dblclick:row":t.authMenuDblclick,"check:row":t.authMenuCheck,"change:row":t.authMenuChange}})],1),e(i.Z,{staticClass:"vue-bt button-type-gray w100p mt10",staticStyle:{"max-width":"unset"},attrs:{disabled:t.menuDisabledYn,elevation:"0",loading:t.isLoading,color:"#004ebc"},on:{click:t.deleteAuthorityGroupMenuList}},[t._v("권한그룹별 메뉴 목록에 삭제하기")])],1),t.cmpntDisabledYn?t._e():e("main",{staticClass:"permission-wrap mt35"},[e("section",{staticClass:"labels-wrap p13 mr10",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("["+t._s(t.menuNm||"-")+"] 컴포넌트 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.cmpntTot)+"건")])])]),e("section",{staticClass:"table-scroll data mt20",staticStyle:{"max-height":"490px"}},[t.isLoading?t._e():e("simple-data-table",{staticClass:"common-research-table notice",staticStyle:{"margin-top":"0"},attrs:{height:"370px",fixedHeader:!0,headers:t.cmpntHeaders,items:t.cmpntItems,rowHeaders:t.rowHeaders},on:{"check:row":t.cmpntCheck}})],1),e(i.Z,{staticClass:"vue-bt w100p mt10",staticStyle:{"max-width":"unset"},attrs:{elevation:"0",loading:t.isLoading},on:{click:t.putAuthorityGroupMenuComponentListStorage}},[t._v("권한그룹별 컴포넌트 목록에 추가하기")])],1),e("section",{staticClass:"labels-wrap p13",staticStyle:{"max-width":"50%",width:"100%"}},[e("h3",{staticClass:"total-info-subtitle d-flex jc-sb ai-c mt0"},[e("span",{staticClass:"info-middot"},[t._v("["+t._s(t.authrtGrupNm)+"] 그룹별 "),e("br"),t._v(" ["+t._s(t.menuNm)+"] 컴포넌트 목록")]),e("div",{staticClass:"table-bt-wrap"},[e("span",{staticStyle:{"font-size":"18px"}},[t._v(t._s(t.authCmpntTot)+"건")]),e(i.Z,{attrs:{loading:t.isLoading,text:"",outlined:"",icon:"",color:"primary"},on:{click:t.postAuthorityGroupMenuComponentListModification}},[e(a.Z,[t._v("mdi-content-save")])],1)],1)]),e("section",{staticClass:"table-scroll data mt13",staticStyle:{"max-height":"490px"}},[t.isLoading?t._e():e("simple-data-table",{staticClass:"common-research-table notice",staticStyle:{"margin-top":"0"},attrs:{headers:t.authCmpntHeaders,items:t.authCmpntItems,fixedHeader:!0,height:"370px",rowHeaders:t.rowHeaders},on:{"check:row":t.authCmpntCheck,"change:row":t.authCmpntChange}})],1),e(i.Z,{staticClass:"vue-bt button-type-gray w100p mt10",staticStyle:{"max-width":"unset"},attrs:{elevation:"0",loading:t.isLoading,color:"#004ebc"},on:{click:t.deleteAuthorityGroupMenuComponentListDelete}},[t._v("권한그룹별 컴포넌트 목록에서 삭제하기")])],1)])])])])])},h=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-header-wrap"},[e("p",{staticClass:"total-header-title"},[t._v("권한그룹별메뉴관리")])])}],o=(s(57658),s(50091)),r=s(31166),u=s(20629),l=s(25108),d={components:{TreeDataTable:o["default"],SimpleDataTable:r["default"]},computed:{...(0,u.Se)("global",["isLoading"]),menuDisabledYn(){return!this.authrtGrupId||1===this.authrtGrupLvl},cmpntDisabledYn(){return!this.authrtGrupId||1===this.authrtGrupLvl||!this.menuId||"com015001"===this.pgmClssCd}},data(){return{rowHeaders:["checkbox"],authHeaders:[{title:"권한그룹",readonly:!0,column:"authrtGrupNm",width:"420px",align:"left"}],menuHeaders:[{title:"메뉴명",readonly:!0,column:"menuNm",width:"420px",align:"left"}],authMenuHeaders:[{title:"메뉴명",readonly:!0,column:"menuNm",width:"300px",align:"left"},{title:"정렬순서",column:"sortSeq",width:"200px",align:"right"},{title:"화면표시여부",column:"scrnIndctYn",width:"200px",align:"center",renderer:{type:"checkbox"}}],cmpntRowHeaders:["checkbox"],cmpntHeaders:[{title:"컴포넌트명",readonly:!0,column:"cmpntNm",width:"200px",align:"left"}],authCmpntHeaders:[{title:"컴포넌트명",readonly:!0,column:"cmpntNm",width:"200px",align:"left"},{title:"사용여부",column:"useYn",width:"90px",align:"center",renderer:{type:"checkbox"}}],cmpntItems:[],authCmpntItems:[],authItems:[],menuList:[],menuItems:[],authMenuList:[],authMenuItems:[],authTot:0,menuTot:0,cmpntTot:0,authMenuTot:0,authCmpntTot:0,menuId:"",menuNm:"",pgmClssCd:"",authrtGrupId:"",authrtGrupNm:"",authrtGrupLvl:"",createMenuList:[],deleteMenuList:[],updateMenuList:[],createCmpntList:[],updateAuthCmpntList:[],deleteAuthCmpntList:[]}},methods:{...(0,u.nv)("global",["showLoading","hideLoading","showSuccess","showError","showWarning"]),getAuthorityGroupList(){this.$apis.common.getAuthorityGroupList().then((t=>{const e=t?.data.response.list;this.authTot=e.length||0,e?.length&&(e.forEach(((t,s)=>{const i=e.filter((({upAuthrtGrupId:e})=>e===t.authrtGrupId))||[];i&&(e[s].children=i)})),this.authItems.push(e[0]))})).catch((t=>{l.error(t),this.hideLoading(),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.$refs.authTree.syncTableLayout()}))},getMenuList(){this.$apis.common.getMenuList().then((t=>{this.menuList=t?.data.response.list,this.menuTot=t?.data.response.list.length;const e=t?.data.response.list;e?.length&&(e.splice(0,0,{menuId:"0100000000",upMenuId:"",menuLvl:0,menuNm:"산학정보통신시스템",sortSeq:0,scrnIndctYn:"Y"}),e.forEach(((t,s)=>{const i=e.filter((({upMenuId:e})=>e===t.menuId))||[];i&&(e[s].children=i)})),this.menuItems.push(e[0]))})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.$refs.menuTree.syncTableLayout(),this.hideLoading()}))},getMenuComponentList(){this.menuId||this.showWarning("컴포넌트 조회 전 menu를 선택해주세요."),this.cmpntItems=[],this.showLoading(),this.$apis.common.getMenuComponentList(this.menuId).then((t=>{this.cmpntItems=t?.data.response.list,this.cmpntTot=this.cmpntItems.length})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))},getAuthorityGroupMenuComponentList(){this.menuId||this.showWarning("컴포넌트 조회 전 menu를 선택해주세요."),this.authCmpntItems=[],this.deleteAuthCmpntList=[],this.updateAuthCmpntList=[],this.showLoading(),this.$apis.common.getAuthorityGroupMenuComponentList(this.authrtGrupId,this.menuId).then((t=>{this.authCmpntItems=t?.data.response.list,this.authCmpntTot=this.cmpntItems.length})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()}))},getAuthorityGroupMenuList(){this.showLoading(),this.authMenuItems=[],this.deleteMenuList=[],this.updateMenuList=[],this.deleteAuthCmpntList=[],this.updateAuthCmpntList=[],this.createCmpntList=[],this.$apis.common.getAuthorityGroupMenuList(this.authrtGrupId).then((t=>{this.authMenuList=t?.data.response.list,this.authMenuTot=t?.data.response.list.length;const e=t?.data.response.list||[];0!==e?.length&&(e.splice(0,0,{menuId:"0100000000",upMenuId:"",menuLvl:0,menuNm:"산학정보통신시스템[수정불가]",sortSeq:0,scrnIndctYn:"Y",pgmClssCd:"com015001"}),e.forEach(((t,s)=>{const i=e.filter((({upMenuId:e})=>e===t.menuId))||[];i&&(e[s].children=i)}))),this.authMenuItems.push(e[0])})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading(),this.$refs.authMenuTree.syncTableLayout()}))},putAuthorityGroupMenuListStorage(){return 0===this.createMenuList.length?(this.showError({message:"추가할 데이터가 없습니다"}),!1):!!confirm("체크된 메뉴 기준으로 하위 메뉴 전체가 추가됩니다.\n추가하시겠습니까?")&&(this.showLoading(),void this.$apis.common.putAuthorityGroupMenuListStorage(this.authrtGrupId,this.createMenuList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},deleteAuthorityGroupMenuList(){return 0===this.deleteMenuList.length?(this.showError({message:"삭제할 데이터가 없습니다"}),!1):this.deleteMenuList.includes("0100000000")?(this.showError({message:"최상위 메뉴는 삭제할 수 없습니다."}),!1):!!confirm("삭제할 데이터의 하위메뉴와 컴포넌트도 같이 삭제됩니다.\n삭제하시겠습니까?")&&(this.showLoading(),void this.$apis.common.deleteAuthorityGroupMenuList(this.authrtGrupId,this.deleteMenuList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},postAuthorityGroupMenuListModification(){return 0===this.updateMenuList.length?(this.showError({message:"수정할 데이터가 없습니다"}),!1):!!confirm("수정하시겠습니까?")&&(this.showLoading(),void this.$apis.common.postAuthorityGroupMenuListModification(this.authrtGrupId,this.updateMenuList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},putAuthorityGroupMenuComponentListStorage(){return 0===this.createCmpntList.length?(this.showError({message:"추가할 데이터가 없습니다"}),!1):!!confirm("추가하시겠습니까?")&&(this.showLoading(),void this.$apis.common.putAuthorityGroupMenuComponentListStorage(this.authrtGrupId,this.menuId,this.createCmpntList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuComponentList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},deleteAuthorityGroupMenuComponentListDelete(){return 0===this.deleteAuthCmpntList.length?(this.showError({message:"삭제할 데이터가 없습니다"}),!1):!!confirm("삭제하시겠습니까?")&&(this.showLoading(),void this.$apis.common.deleteAuthorityGroupMenuComponentListDelete(this.authrtGrupId,this.menuId,this.deleteAuthCmpntList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuComponentList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},postAuthorityGroupMenuComponentListModification(){return 0===this.updateAuthCmpntList.length?(this.showError({message:"수정할 데이터가 없습니다"}),!1):!!confirm("수정하시겠습니까?")&&(this.showLoading(),void this.$apis.common.postAuthorityGroupMenuComponentListModification(this.authrtGrupId,this.menuId,this.updateAuthCmpntList).then((t=>{t?.data.code>"300"?this.showError({message:t?.data.message}):(this.showSuccess("처리가 완료되었습니다."),this.getAuthorityGroupMenuComponentList())})).catch((t=>{l.error(t),this.showError({message:"통신 중 오류가 발생하였습니다."})})).finally((()=>{this.hideLoading()})))},menuCheck(t,e,s,i){if(e)this.createMenuList.push(t.menuId);else for(let a=0;a<this.createMenuList.length;a++)this.createMenuList[a]===t.menuId&&(this.createMenuList.splice(a,1),a--)},authMenuCheck(t,e,s,i){if(e)this.deleteMenuList.push(t.menuId);else for(let a=0;a<this.deleteMenuList.length;a++)this.deleteMenuList[a]===t.menuId&&(this.deleteMenuList.splice(a,1),a--)},cmpntCheck(t,e){if(e)this.createCmpntList.push(t.sn);else for(let s=0;s<this.createCmpntList.length;s++)this.createCmpntList[s]===t.sn&&(this.createCmpntList.splice(s,1),s--)},authCmpntCheck(t,e){if(e)this.deleteAuthCmpntList.push(t.sn);else for(let s=0;s<this.deleteAuthCmpntList.length;s++)this.deleteAuthCmpntList[s]===t.sn&&(this.deleteAuthCmpntList.splice(s,1),s--)},authCmpntChange(t,e,s){let i="I";for(const a in this.updateAuthCmpntList)if(this.updateAuthCmpntList[a].sn===t.sn){this.updateAuthCmpntList[a]=t,i="U";break}"I"===i&&(t.FLAG="U",this.updateAuthCmpntList.push(t))},authDblclick(t,e,s,i){return this.authrtGrupLvl=t.authrtGrupLvl,1===this.authrtGrupLvl?(this.showWarning("메뉴를 추가할 수 없는 권한입니다."),!1):!((this.updateMenuList.length||this.updateAuthCmpntList.length)&&!confirm("수정된 이력이 남아있습니다. 다른 권한으로 넘어가면 입력된 내용이 사라집니다.\n조회하시겠습니까?"))&&(this.authrtGrupId=t.authrtGrupId,this.authrtGrupNm=t.authrtGrupNm,this.menuId="",this.menuNm="",this.pgmClssCd="",void this.getAuthorityGroupMenuList())},authMenuDblclick(t,e,s,i){if(this.menuId=t.menuId,this.menuNm=t.menuNm,this.pgmClssCd=t.pgmClssCd,"com015001"===t.pgmClssCd)return!1;this.getMenuComponentList(),this.getAuthorityGroupMenuComponentList()},authMenuChange(t,e,s,i,a,n){let h="I";if(""===t.upMenuId)return!1;const o={sortSeq:t.sortSeq,scrnIndctYn:t.scrnIndctYn,authrtGrupId:t.authrtGrupId,menuId:t.menuId};for(const r in this.updateMenuList)if(this.updateMenuList[r].menuId===o.menuId){this.updateMenuList[r]=o,h="U";break}"I"===h&&(t.FLAG="U",this.updateMenuList.push(o))}},created(){this.showLoading(),this.getAuthorityGroupList(),this.getMenuList()}},c=d,m=s(1001),p=(0,m.Z)(c,n,h,!1,null,null,null),g=p.exports}}]);