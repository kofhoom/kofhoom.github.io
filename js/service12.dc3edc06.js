"use strict";(self["webpackChunkgdv_frontend"]=self["webpackChunkgdv_frontend"]||[]).push([[4501,2967],{61130:function(t,e,s){s.r(e),s.d(e,{default:function(){return v}});var i=s(64562),a=s(85166),l=s(89780),n=s(92648),o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-info-content-wrap"},[t._m(0),e("div",{staticClass:"total-info-section"},[e("div",{staticClass:"total-info-content-wrap"},[e("div",{attrs:{id:"div-total-info-header"}}),e("div",{staticClass:"total-info-section"},[e("div",{staticClass:"half-table-grid",staticStyle:{"min-width":"48%"}},[e("div",[e("h3",{staticClass:"total-info-subtitle d-flex"},[e("span",{staticClass:"info-middot"},[t._v("·")]),t._v(" 회원 목록 "),e("article",{staticClass:"total-info-article mla"},[e("span",[t._v("검색된 대상자:")]),t._v(" "),e("span",[t._v(t._s(t.list.length))]),t._v(" "),e("span",[t._v("명")])])]),e("form",{staticClass:"center-search-wrap small mt14"},[e(a.Z,{staticClass:"center-search-select small",attrs:{items:t.items1,"item-text":"name","item-value":"value",label:"회원구분 전체",solo:"",loading:t.isLoading,"hide-details":"",height:"36"},on:{change:function(e){t.inqVal="00"===t.stusCd?"":t.inqVal}},model:{value:t.stusCd,callback:function(e){t.stusCd=e},expression:"stusCd"}}),e(a.Z,{staticClass:"center-search-select small",attrs:{items:t.items2,"item-text":"name","item-value":"value",label:"검색조건 전체",solo:"",loading:t.isLoading,"hide-details":""},on:{change:function(e){t.inqVal="00"===t.inqSlctn?"":t.inqVal}},model:{value:t.inqSlctn,callback:function(e){t.inqSlctn=e},expression:"inqSlctn"}}),e(l.Z,{staticClass:"center-search-input small",attrs:{label:"",placeholder:"검색어를 입력해주세요",outlined:"",loading:t.isLoading,dense:"","hide-details":""},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchList.apply(null,arguments)}},model:{value:t.inqVal,callback:function(e){t.inqVal=e},expression:"inqVal"}}),e(i.Z,{staticClass:"vue-bt-small small",attrs:{elevation:"0",loading:t.isLoading},on:{click:t.searchList}},[t._v("검색")])],1),e("section",{staticClass:"half-table-wrap"},[t.isLoading?t._e():e("simple-data-table",{staticClass:"common-research-table notice mt33",staticStyle:{"margin-top":"10px"},attrs:{headers:t.headers,items:t.list,rowHeaders:t.rowHeaders},on:{"check:row":t.rowCheck}})],1)]),e("div",[e("div"),e("h3",{staticClass:"total-info-subtitle d-flex"},[e("span",{staticClass:"info-middot"},[t._v("·")]),t._v(" 비회원 업로드 목록 "),e("article",{staticClass:"total-info-article mla"},[e("span",[t._v("선택된 대상자:")]),t._v(" "),e("span",[t._v(t._s(t.list2.length))]),t._v(" "),e("span",[t._v("명")])])]),e("div",{staticClass:"vue-bt-wrap align-right mt15",staticStyle:{height:"48px","align-items":"unset !important"}},[e("a",{attrs:{href:"/files/nomember_mms_input_layout.xlsx",download:"SMS_비회원_업로드양식.xlsx"}},[e(i.Z,{staticClass:"vue-bt-ico button-type-orange mr7",attrs:{elevation:"0",loading:t.isLoading}},[e("img",{staticClass:"mr10",attrs:{src:s(37141),alt:"파일 다운로드 아이콘"}}),e("span",[t._v("엑셀업로드 양식 다운로드")])])],1),e(i.Z,{staticClass:"vue-bt mla",staticStyle:{width:"auto"},attrs:{elevation:"0",loading:t.isLoading,"max-width":"fit-content"},on:{click:t.onClickUpload}},[t._v("비회원 대상자 업로드")]),e("input",{attrs:{id:"fileUpload",type:"file",accept:".xls, .xlsx",hidden:""},on:{change:t.selectFile}})],1),e("section",{staticClass:"half-table-wrap"},[t.isLoading?t._e():e("simple-data-table",{staticClass:"common-research-table notice mt33",staticStyle:{"margin-top":"10px"},attrs:{headers:t.headers2,items:t.list2,rowHeaders:t.rowHeaders},on:{"check:row":t.rowCheck}})],1)]),e("div",{staticClass:"section-line type-blue mb10"}),e("div",[e("h3",{staticClass:"total-info-subtitle d-flex"},[e("span",{staticClass:"info-middot"},[t._v("·")]),t._v(" 발송 대상자 목록 "),e("article",{staticClass:"total-info-article mla"},[e("span",[t._v("선택된 대상자:")]),t._v(" "),e("span",[t._v(t._s(t.list3.length))]),t._v(" "),e("span",[t._v("명")])])]),e("section",{staticClass:"half-table-wrap mt14"},[t.isLoading?t._e():e("simple-data-table",{staticClass:"common-research-table notice mt33",staticStyle:{"margin-top":"10px"},attrs:{headers:t.headers,items:t.list3,rowHeaders:t.rowHeaders},on:{"check:row":t.SendrowCheck}})],1),e("div",{staticClass:"vue-bt-wrap align-right mt26"},[e(i.Z,{staticClass:"vue-bt",attrs:{elevation:"0",loading:t.isLoading},on:{click:t.deleteSendList}},[t._v("선택 삭제")]),e(i.Z,{staticClass:"vue-bt button-type-red",attrs:{elevation:"0",loading:t.isLoading},on:{click:function(e){t.list3=[]}}},[t._v("전체 삭제")])],1)]),e("div",{staticClass:"v-textarea-wrap"},[t._m(1),e("section",{staticClass:"half-table-wrap mt14"},[e(n.Z,{attrs:{outlined:"",name:"input-7-4",loading:t.isLoading,"no-resize":"",placeholder:"문자내용입력란",height:"360",rules:t.cnRule},model:{value:t.cn,callback:function(e){t.cn=e},expression:"cn"}})],1),e("div",{staticClass:"vue-bt-wrap align-right mt26"},[e("input",{attrs:{id:"imageUpload",type:"file",accept:".jpg, .JPG",hidden:""},on:{change:t.selectImage}}),e("p",[t._v(t._s(t.fileNm))]),e(i.Z,{staticClass:"vue-bt",attrs:{elevation:"0",loading:t.isLoading},on:{click:t.uploadImage}},[t._v("이미지 첨부")]),e(i.Z,{staticClass:"vue-bt",attrs:{elevation:"0",loading:t.isLoading},on:{click:t.postMmsSndng}},[t._v("MMS 발송")])],1)])])])])])])},r=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"total-header-wrap"},[e("p",{staticClass:"total-header-title"},[t._v("SMS 보내기")])])},function(){var t=this,e=t._self._c;return e("h3",{staticClass:"total-info-subtitle"},[e("span",{staticClass:"info-middot"},[t._v("·")]),t._v(" 보낼 메세지 "),e("article",{staticClass:"total-info-article mla"},[e("span",[t._v("※이미지 사이즈는 300kb이하, 크기는 (1500, 1440)이하만 가능합니다.")])])])}],c=(s(57658),s(20629)),d=s(31166),h=s(25108),m={components:{SimpleDataTable:d["default"]},data(){return{items1:[{name:"학생회원",value:"com003002"},{name:"교직원회원",value:"com003003"},{name:"기업회원",value:"com003004"},{name:"일반회원",value:"com003005"}],items2:[{name:"전체",value:"00"},{name:"아이디",value:"01"},{name:"이름",value:"02"},{name:"전화번호",value:"03"}],rowHeaders:["checkbox"],headers:[{title:"신분",column:"stusCd",width:"50px",readonly:!0},{title:"아이디",column:"userId",width:"70px",readonly:!0},{title:"이름",column:"userNm",width:"70px",readonly:!0},{title:"전화번호",column:"mblTelno",readonly:!0}],headers2:[{title:"신분",column:"stusCd",readonly:!0},{title:"이름",column:"userNm",readonly:!0},{title:"전화번호",column:"mblTelno",readonly:!0}],inqSlctn:"00",stusCd:"00",checkbox:!1,inqVal:"",list:[],list2:[],list3:[],selected:[],image:"",sJson:{mmsList:[]},mmsList:{rcvrId:"",rcvrTelno:"",rcvrNm:"",mmsCn:""},rcvrId:[],rcvrTelno:[],rcvrNm:[],cn:"",cnRule:[t=>!!t||"필수 입력사항입니다.",t=>!(t&&t.length>=500)||"메세지는 500자 이상 입력할 수 없습니다."],fileNm:"선택된 파일 없음"}},computed:{...(0,c.Se)("global",["isLoading"])},methods:{...(0,c.nv)("global",["showLoading","hideLoading","showSuccess","showError"]),getMbrList(){this.showLoading(),this.$apis.common.getMbrList(this.stusCd,this.inqSlctn,this.inqVal).then((t=>{h.log(t),this.list=t.data.response.result})).catch((t=>{h.log(t)})).finally((()=>{this.hideLoading()}))},postMmsNmbrExlUld(){this.showLoading();const t=new FormData;t.append("file",this.UploadFile),this.$apis.common.postMmsNmbrExlUld(t).then((t=>{h.log(t),this.list=t.data.response.result})).catch((t=>{h.log(t)})).finally((()=>{this.hideLoading()}))},onClickUpload(){const t=document.getElementById("fileUpload");t.click()},selectFile(t){const e=new FormData;e.append("file",t.target.files[0]),this.showLoading(),this.$apis.common.postMmsNmbrExlUld(e).then((t=>{document.getElementById("fileUpload").value=null,this.list2=t.data.response.List})).catch((t=>{document.getElementById("fileUpload").value=null,this.list2=[],h.error(t)})).finally((()=>{this.hideLoading()}))},rowCheck(t,e){if(e)this.list3.push(t);else for(let s=0;s<this.list3.length;s++)this.list3[s].mblTelno===t.mblTelno&&this.list3[s].userNm===t.userNm&&(this.list3.splice(s,1),s--)},SendrowCheck(t,e){if(e)this.selected.push(t);else for(let s=0;s<this.selected.length;s++)this.selected[s].mblTelno===t.mblTelno&&this.selected[s].userNm===t.userNm&&(this.selected.splice(s,1),s--)},deleteSendList(){for(let t=0;t<this.selected.length;t++)for(let e=0;e<this.list3.length;e++)this.list3[e].mblTelno===this.selected[t].mblTelno&&this.list3[e].userNm===this.selected[t].userNm&&(this.list3.splice(e,1),e--);this.selected=[]},uploadImage(){const t=document.getElementById("imageUpload");t.click()},selectImage(t){t.target.files[0].size>307200?(this.showError({message:"이미지 사이즈는 300KB 이하만 가능합니다."}),document.getElementById("imageUpload").value="",this.fileNm="선택된 파일 없음"):"image/jpeg"!==t.target.files[0].type?(this.showError({message:"jpg 파일만 첨부 가능합니다."}),document.getElementById("imageUpload").value="",this.fileNm="선택된 파일 없음"):(this.fileNm=t.target.files[0].name,this.image=t.target.files[0],this.showSuccess("등록이 완료되었습니다."))},postMmsSndng(){this.rcvrId=[],this.rcvrNm=[],this.rcvrTelno=[];for(let t=0;t<this.list3.length;t++)this.rcvrId.push(this.list3[t].userId),this.rcvrNm.push(this.list3[t].userNm),this.rcvrTelno.push(this.list3[t].mblTelno);if(""!==this.cn&&0!==this.list3.length){const t=new FormData;t.append("file",this.image),t.append("rcvrId",this.rcvrId),t.append("rcvrNm",this.rcvrNm),t.append("rcvrTelno",this.rcvrTelno),t.append("cn",this.cn),this.showLoading(),this.$apis.common.postMmsSndng(t).then((t=>{h.log(t),this.list3=[],this.cn="",document.getElementById("imageUpload").value="",this.fileNm="선택된 파일 없음",this.showSuccess("MMS 발송 완료")})).catch((t=>{h.log(t)})).finally((()=>{this.hideLoading()}))}else""===this.cn?this.showError({message:"메세지 내용을 입력해주세요"}):0===this.list3.length&&this.showError({message:"발송 대상자가 없습니다"})},searchList(){""!==this.inqVal&&""===this.inqVal?.trim()?this.showError({message:"공백은 검색이 불가능합니다."}):this.getMbrList()}}},u=m,p=s(1001),g=(0,p.Z)(u,o,r,!1,null,"3d5c8962",null),v=g.exports},92648:function(t,e,s){s.d(e,{Z:function(){return n}});var i=s(89780),a=s(67678);const l=(0,a.Z)(i.Z);var n=l.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:t=>!isNaN(parseFloat(t))},rows:{type:[Number,String],default:5,validator:t=>!isNaN(parseInt(t,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...i.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(t){this.$nextTick((()=>{var e;t?this.calculateInputHeight():null===(e=this.$refs.input)||void 0===e||e.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const t=this.$refs.input;if(!t)return;t.style.height="0";const e=t.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(s,e)+"px"},genInput(){const t=i.Z.options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput(t){i.Z.options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.$emit("keydown",t)}}})}}]);